---
title: "Ethereum Smart Contract å…¥é–€é›œè«‡"
author: "Yuren Ju"
date: 2017-08-10T00:39:45.686Z
lastmod: 2023-06-06T13:40:03+08:00
categories: [tech]

description: ""

subtitle: "æœ€è¿‘æƒ³é–‹å§‹è©¦è©¦ Ethereum çš„ Smart Contractï¼Œå…¥é–€æ™‚å»é‡åˆ°å¾ˆå¤šå•é¡Œï¼Œæ„Ÿè¬ Taipei Ethereum Meetup èˆ‡ Chih-Cheng Liang çš„å”åŠ©ï¼Œæœ€è¿‘çµ‚æ–¼æ¯”è¼ƒææ¸…æ¥šä¸€äº›åŸºç¤çŸ¥è­˜ï¼Œå¯«ä¸‹ä¾†åˆ†äº«çµ¦å…¶ä»–ä¹Ÿæƒ³å­¸ç¿’ Smart Contractâ€¦"

images:
  - "/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/1.png"
  - "/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/2.png"
  - "/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/3.png"
  - "/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/4.png"
  - "/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/5.png"
  - "/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/6.png"
  - "/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/7.png"
  - "/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/8.png"
  - "/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/9.png"
  - "/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/10.png"
  - "/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/11.png"
---

![image](/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/1.png#layoutTextWidth)
æœ€è¿‘æƒ³é–‹å§‹è©¦è©¦ Ethereum çš„ Smart Contractï¼Œå…¥é–€æ™‚å»é‡åˆ°å¾ˆå¤šå•é¡Œï¼Œæ„Ÿè¬ [Taipei Ethereum Meetup](https://www.meetup.com/Taipei-Ethereum-Meetup/) èˆ‡ [Chih-Cheng Liang](https://medium.com/u/5c031577a87d) çš„å”åŠ©ï¼Œæœ€è¿‘çµ‚æ–¼æ¯”è¼ƒææ¸…æ¥šä¸€äº›åŸºç¤çŸ¥è­˜ï¼Œå¯«ä¸‹ä¾†åˆ†äº«çµ¦å…¶ä»–ä¹Ÿæƒ³å­¸ç¿’ Smart Contract çš„æ–°æ‰‹ã€‚

ä»¥ä¸‹çš„ä»‹ç´¹å°±åªåŒ…å«åŸºç¤çŸ¥è­˜åˆ°æ¶µè“‹åˆ°è¦å¦‚ä½•é–‹å§‹ç…§è‘—å®˜æ–¹çš„ [Create your own crypto-currency](https://ethereum.org/token) æŒ‡å¼•é–‹å§‹å¯« Smart Contractï¼Œå‰©ä¸‹çš„å¯èƒ½ä¹‹å¾Œæœƒå†ç™¼å…¶ä»–æ–‡ç« ä»‹ç´¹ã€‚

ä¸€äº›ä¸­è‹±å°ç…§ï¼š

- Ethereum: ä»¥å¤ªåŠ
- Ether: ä»¥å¤ªå¹£
- Smart Contract: æ™ºæ…§åˆç´„ / æ™ºèƒ½åˆç´„
- Wallet: éŒ¢åŒ…
- Faucet: ç™¼æ¸¬è©¦ç”¨ä»¥å¤ªå¹£çš„æœå‹™

### Smart Contract ç°¡ä»‹

Smart Contract æ˜¯åœ¨å€å¡Šéˆä¸Šçš„åˆç´„ï¼Œåˆç´„è·ŸåŸ·è¡Œçš„çµæœéƒ½æœƒå„²å­˜åœ¨å€å¡Šéˆä¸Šé¢ã€‚æ¯”å¦‚èªªä½ è¦ç™¼è¡Œè²¨å¹£ï¼Œä¸¦ä¸”æä¾›è½‰å¸³ (transfer) ä»¥åŠè²·è³£åŠŸèƒ½å°±æ˜¯ä¸€å€‹åˆç´„ï¼Œæ¯”å¦‚èªªåœ¨å€å¡Šéˆä¸Šä¸€é–“å…¬å¸çš„è‚¡æ±ç™¼èµ·æŠ•ç¥¨ä¹Ÿæ˜¯ä¸€ç¨® Smart Contractã€‚

å¦‚æœä½ æ˜¯è»Ÿé«”å·¥ç¨‹å¸«æ‡‰è©²æœƒæƒ³ï¼šé€™æˆ‘ä¹Ÿå¯ä»¥è‡ªå·±é–‹ç™¼å‡ºé¡ä¼¼çš„ç³»çµ±å•Šï¼Ÿ

æ²’éŒ¯ï¼Œå€å¡Šéˆä¸Šçš„æ‡‰ç”¨åŸºæœ¬ä¸Šä½ éƒ½å¯ä»¥åœ¨æ²’æœ‰ä½¿ç”¨å€å¡Šéˆçš„æƒ…æ³ï¼Œç”¨ä½ æ…£ç”¨çš„æ–¹å¼å¯¦ä½œï¼Œä¸Šé¢èˆ‰çš„é€™å…©å€‹ä¾‹å­ï¼Œä½ éƒ½å¯ä»¥è‡ªå·±å¯«ç³»çµ±ä¾†åšï¼Œåªæ˜¯é€™äº›åšå‡ºä¾†çš„ç³»çµ±é€šå¸¸æ˜¯é›†ä¸­å¼ (centralized) çš„æ¶æ§‹ã€‚

Ethereum çš„ Smart Contract ä¸ä¸€æ¨£çš„åœ°æ–¹æ˜¯ï¼š

1.  Ethereum æœ¬èº«å°±æ˜¯ä¸€å€‹è™›æ“¬è²¨å¹£é‡‘æµç³»çµ±ï¼Œæ‰€ä»¥è™•ç†è·Ÿè™›æ“¬è²¨å¹£é‡‘æµç›¸é—œçš„äº‹æƒ…æœƒéå¸¸å®¹æ˜“ã€‚
2.  å®ƒæ˜¯åˆ†æ•£å¼ç³»çµ±ï¼Œè¨ˆç®—çµæœèˆ‡å¯«å…¥çš„è³‡è¨Šæœƒå­˜åœ¨åˆ†æ•£å¼çš„å¸³æœ¬è£¡é¢ç¶“éè¨±å¤šäººé©—è­‰ã€‚å¦‚æœæœ‰äººæƒ³è¦ç«„æ”¹å°±æœƒè®Šæˆè¦æ”»æ“Šæ•´å€‹ç³»çµ±å…§çš„éå¸¸å¤šç¯€é»æ‰æœ‰è¾¦æ³•è¾¦åˆ°ã€‚

ä½ å¯ä»¥æƒ³åƒæä¾›è½‰å¸³æˆ–æ˜¯è‚¡æ±æŠ•ç¥¨æ˜¯ä½ è‡ªå·±å¯«çš„ç³»çµ±æ™‚ï¼Œä¸€æ—¦è¢«å…¥ä¾µä¸»æ©Ÿç«„æ”¹å¾Œçš„çµæœã€‚ä½†æ˜¯åœ¨ Smart Contract ä¸‹ç•¶è³‡è¨Šå·²ç¶“è¢«å¯«å…¥å€å¡Šéˆå¾Œï¼Œè¦è¢«ä¿®æ”¹å°±æœƒè®Šå¾—å›°é›£è¨±å¤šï¼ˆä½†ä¸è¦‹å¾—ä¸æœƒè¢«å…¥ä¾µï¼Œå®‰å…¨æ€§å…¶å¯¦ä¹Ÿæ˜¯å€‹æŒ‘æˆ°ï¼‰ã€‚

å¦‚æœä½ éœ€è¦ä»€éº¼æ‡‰ç”¨æ˜¯å¸Œæœ›å¯«å…¥å¾Œçš„çµæœæ˜¯é€æ˜ã€ä¸å®¹æ˜“è¢«ç«„æ”¹ä¸¦ä¸”æ˜¯åˆ†æ•£å¼æ¶æ§‹ï¼Œä½ å¯ä»¥è€ƒæ…®å°‡é€™å€‹æ‡‰ç”¨æ”¾åˆ°å€å¡Šéˆä¸Šã€‚

### Wallet, Backend &amp; Network

![image](/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/2.png#layoutTextWidth)

é€™æ˜¯æˆ‘å‰›é–‹å§‹è¦ºå¾—æœ€æ··äº‚çš„éƒ¨åˆ†ï¼Œå‰›é–‹å§‹å…¥é–€ Ethereum èˆ‡å…¶ä»–å€å¡Šéˆä¸€æ¨£éƒ½æœƒéœ€è¦æœ‰éŒ¢åŒ… (Wallet)ã€‚è€ŒéŒ¢åŒ…å¤§è‡´ä¸Šå¯ä»¥åˆ†æˆæœ‰åœ–å½¢åŒ–ä½¿ç”¨ä»‹é¢ (GUI) æˆ–æ˜¯åªæœ‰æŒ‡ä»¤ä»‹é¢ã€‚å‰›é–‹å§‹æœƒå…ˆä½¿ç”¨æœ‰ GUI ä»‹é¢çš„ï¼Œä½†æ˜¯çœŸçš„è¦é–‹ç™¼æ™‚é‚„æ˜¯æœƒéœ€è¦æŒ‡ä»¤ä»‹é¢çš„ç¨‹å¼æœƒæ›´å¯¦ç”¨ã€‚

Wallet Backend æ˜¯è² è²¬çœŸæ­£å°å€å¡Šéˆçš„æ“ä½œï¼Œç›®å‰æˆ‘æœ‰ç”¨éçš„ backend æœ‰ geth è·Ÿ parityã€‚

è‡³æ–¼é€™äº› Wallet Backend å‰‡å¯ä»¥ç”¨è¨­å®šçš„æ–¹å¼é€£æ¥åˆ°è¨±å¤šä¸åŒçš„ Network (ç¶²è·¯)ï¼Œæœ‰å…¬ç”¨ç¶²è·¯ä¹Ÿæœ‰ç§æœ‰ç¶²è·¯ï¼Œç”šè‡³æœ‰æ¸¬è©¦ç”¨çš„æ¨¡æ“¬ç¶²è·¯ç­‰ã€‚

#### Wallet UI

![image](/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/3.png#layoutTextWidth)

[Mist](https://github.com/ethereum/mist/): å°±æ˜¯é‚£å¥—å¯ä»¥åœ¨ ethereum.org å®˜ç¶²ä¸‹è¼‰çš„éŒ¢åŒ…è»Ÿé«”ï¼Œå…¶ä¸­è£¡é¢å…§å»ºäº† geth æ ¸å¿ƒï¼Œæ‰€ä»¥ Wallet backend æ˜¯ä½¿ç”¨ gethï¼ŒMist ä¸»è¦å°±æ˜¯ GUI ä»‹é¢ã€‚è‹¥æ²’æœ‰æ›´æ”¹é geth çš„è¨­å®šï¼Œä½¿ç”¨ Mist ç¬¬ä¸€æ¬¡åŒæ­¥è¦èŠ±éå¸¸ä¹…çš„æ™‚é–“ã€‚

![image](/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/4.png#layoutTextWidth)
ä½¿ç”¨æ¸¬è©¦ç¶²è·¯çš„ Mist

[Parity](https://parity.io/): é€™æ˜¯å¦å¤–ä¸€å¥— Walletï¼Œç‰¹é»æ˜¯åŒæ­¥å€å¡Šçš„é€Ÿåº¦æ¯”èµ· Mist/geth è¦æ›´å¿«ã€‚å…¶ä»‹é¢æ˜¯ webã€‚ä½¿ç”¨ `parity ui` æŒ‡ä»¤å°±æœƒç›´æ¥åœ¨ä½ çš„é è¨­ç€è¦½å™¨ä¸Šé–‹å•Ÿ Parity Web UIã€‚å®ƒçš„ backend è·Ÿ frontend æ”¾åœ¨ä¸€èµ·ï¼Œä¸¦æ²’æœ‰ç‰¹æ„åˆ†æˆå…©å€‹å°ˆæ¡ˆï¼Œæ‰€ä»¥åœ¨æ¶æ§‹åœ– backend é‚£æ¬„ä¹Ÿæ˜¯ parityã€‚

![image](/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/5.png#layoutTextWidth)

geth console: é€™æ˜¯åŒ…å«åœ¨ [geth (ethereum-go)](https://github.com/ethereum/go-ethereum) çš„ä¸€å€‹æŒ‡ä»¤ä»‹é¢ï¼Œè·Ÿ JavaScript çš„ console éå¸¸é¡ä¼¼ï¼Œå¯ä»¥ç”¨æŒ‡ä»¤çš„æ–¹å¼åŸ·è¡Œå„ç¨®åŠŸèƒ½å¦‚æŸ¥çœ‹é¤˜é¡ã€åŒ¯æ¬¾ã€è®€å– script ç­‰ç­‰åŠŸèƒ½ã€‚æ¯”å¦‚èªªè¦åŒ¯æ¬¾å°±å¯ä»¥ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š
`eth.sendTransaction({from: eth.accounts[0], to: eth.accounts[1], value: 1000})`
![image](/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/6.png#layoutTextWidth)

#### Wallet Backend

**Parity**: å‰›æœ‰ä»‹ç´¹éäº† Parity æœ¬èº«åŒ…å«äº† Web UI èˆ‡ ethereum clientã€‚ä¸éå› ç‚º Parity ä¹Ÿæä¾›äº†èˆ‡ geth ç›¸å®¹çš„ä»‹é¢ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³è¦ç”¨ Parity ä½œç‚º backendï¼ŒMist ä½œç‚º frontend ä¹Ÿæ˜¯å¯ä»¥ï¼Œè©³æƒ…å¯ä»¥çœ‹é€™å€‹ [reddit](https://www.reddit.com/r/ethereum/comments/53eh1w/how_to_use_the_ethereum_wallet_with_parity/)ã€‚

**geth (ethereum-go)**: é™¤äº† console UI ä»¥å¤–ï¼Œgeth é‚„æ˜¯ä¸€å€‹å®Œæ•´çš„ ethereum clientï¼Œé€™ä¹Ÿæ˜¯ç‚ºä»€éº¼ mist è£¡é¢æœƒåŒ…å«ä¸€å€‹ gethï¼Œå› ç‚º mist æœ¬èº«åªæœ‰ GUI ä»‹é¢ï¼ŒçœŸæ­£å°ä¹™å¤ªåŠçš„æ“ä½œéƒ½æ˜¯ç”± geth æä¾›ã€‚æ‰€ä»¥ç”± geth æœ¬èº«æä¾›å…¨åŠŸèƒ½çš„ ethereum clientï¼Œæ­é…ä¸Š geth console çš„æŒ‡ä»¤ä»‹é¢ï¼Œå¯«åˆç´„ç¨‹å¼æ™‚å°±å¯ä»¥ä½¿ç”¨é€™å€‹å·¥å…·åšä¸€äº›é–‹ç™¼è€…ç¿’æ…£çš„æ“ä½œã€‚

#### Network

![image](/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/7.png#layoutTextWidth)

æˆ‘å‰›é–‹å§‹åœ¨é€™é‚Šè¢«å›°äº†å¾ˆä¹…ï¼Œå› ç‚ºå®˜ç¶²ä¸Šé¢çš„ token tutorial å¯«å¾—ä¸¦ä¸æ˜¯å¾ˆæ¸…æ¥šã€‚

Ethereum æœ‰å¾ˆå¤šä¸åŒçš„ç¶²è·¯å¯ä»¥é¸æ“‡ï¼ŒçœŸæ­£çš„ä»¥å¤ªå¹£ (ether) æ˜¯æ”¾åœ¨ mainnet ä¸Šé¢ï¼Œä½†æ˜¯åœ¨é–‹å§‹æŠŠ smart contract ç™¼ä½ˆåˆ° mainnet ä¹‹å‰ï¼Œä½ å¯ä»¥æœ‰å¾ˆå¤šç¨®æ–¹å¼æ¸¬è©¦ã€‚

**å…¬é–‹çš„æ¸¬è©¦ç¶²è·¯**ï¼šç¶²è·¯ä¸Šæœ‰ä¸€äº›å…¬é–‹çš„æ¸¬è©¦ç¶²è·¯å¦‚ Rposten æˆ– Kovanï¼Œé€™äº›æ˜¯å…¬é–‹åœ¨ç¶²è·¯ä¸Šçš„æœå‹™ï¼Œä¹Ÿå¯ä»¥ç”¨ etherscan.io æŸ¥è©¢åˆ°ç›¸é—œçš„äº¤æ˜“èˆ‡åˆç´„ã€‚

**ç§æœ‰éˆ (private chain)**ï¼šè·Ÿä¸Šé¢çš„ç¶²è·¯ä¸€æ¨£ï¼Œåªæ˜¯æ˜¯å¯ä»¥ç”±ä½ è‡ªå·±å‰µé€ ï¼Œç”±æ–¼æ˜¯è‡ªå·±å‰µé€ çš„é—œä¿‚å¯ä»¥ mining çš„é€Ÿåº¦èª¿å¿«ä¸€äº›ï¼Œè®“ä½ å¾ˆå¿«å°±å¯ä»¥æœ‰æ¸¬è©¦ç”¨çš„ä»¥å¤ªå¹£å¯ä»¥ç”¨ã€‚

**testprc**ï¼šé€™æ˜¯ä¸€å€‹ node.js æ¨¡çµ„ï¼Œä»–æœƒæä¾›ä¸€å€‹æ¨¡æ“¬ç¶²è·¯æä¾›ä½ æ¸¬è©¦ç”¨ã€‚ä¸Šé¢ä¹Ÿæ”¾äº†è¨±å¤šä»¥å¤ªå¹£èˆ‡è·Ÿå…¶ä»– ethereum ç›¸å®¹çš„ä»‹é¢ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ `geth attach &lt;TESTRPC_ADDRESS&gt;` ç›´æ¥é€£ä¸Šä¾†æ¸¬è©¦ã€‚

æ–‡æœ«å†ä¾†è§£é‡‹ä¸€ä¸‹è¦æ€éº¼é€£åˆ°é€™äº›ç¶²è·¯ã€‚ä¸‹é¢å…ˆåˆ—å‡ºå¹¾å€‹æˆ‘é‡åˆ°çš„ç–‘å•è·Ÿå¯èƒ½çš„è§£ç­”ã€‚

### åŒæ­¥å¸³æœ¬éœ€è¦èŠ±è²»éå¸¸ä¹…çš„æ™‚é–“

é€™æ˜¯æˆ‘å‰›é–‹å§‹é‡åˆ°çš„ç¬¬ä¸€å€‹å•é¡Œï¼Œå¦‚æœä½ ä½¿ç”¨ Mist Wallet ä¹Ÿå°±æ˜¯å®˜æ–¹ç¶²ç«™ä¸Šå¯ä»¥ä¸‹è¼‰çš„é‚£å€‹éŒ¢åŒ…ï¼Œæˆ‘èŠ±äº†éš”å¤œçš„æ™‚é–“åœ¨ Mist ä¸ŠæŠŠæ‰€æœ‰çš„å€å¡ŠåŒæ­¥å®Œã€‚

å¦‚æœä½ éœ€è¦å¿«ä¸€é»çš„é¸æ“‡ï¼Œå¯ä»¥ç”¨ [Parity Wallet](https://parity.io/)ï¼Œä½†æˆ‘è‡ªå·±æ˜¯æƒ³ç…§è‘—å®˜æ–¹æŒ‡å¼•å…ˆåšä¸€æ¬¡ï¼Œæ‰€ä»¥æˆ‘é‚„æ˜¯é¸æ“‡ç”¨ Mist ï¼ˆä½†æ˜¯æˆ‘ç¾åœ¨çŸ¥é“å…¶å¯¦æˆ‘å¯ä»¥ç”¨ parity ä½œç‚º backend æ­é… Mist çš„ä»‹é¢äº†ï¼Œç‚ºæ™‚å·²æ™šï½ï½ï¼‰ã€‚

### ç™¼ä½ˆ Smart Contract éœ€è¦ä»¥å¤ªå¹£

ä¸è«–æ˜¯ mainnet æˆ– testnet éƒ½éœ€è¦ä»¥å¤ªå¹£æŠŠåˆç´„éƒ¨ç½²åˆ°å€å¡Šéˆä¸Šï¼Œæ‰€ä»¥ä½ æœƒéœ€è¦ä¸€é»ä»¥å¤ªå¹£ï¼Œé¡¯ç„¶æ¸¬è©¦æ™‚ç”¨ä¸»ç¶²è·¯å¾ˆä¸ç†æ™ºã€‚é›–ç„¶æ¸¬è©¦ç¶²è·¯ä¹Ÿéœ€è¦ä»¥å¤ªå¹£ï¼Œåªæ˜¯é€™å€‹æ¸¬è©¦ç”¨çš„ä»¥å¤ªå¹£åªå­˜åœ¨æ¸¬è©¦ç¶²è·¯ä¸æœƒåœ¨å¤–é¢æµé€šï¼Œä¹Ÿå¯ä»¥é€éä¸€äº›ç®¡é“å–å¾—æ¸¬è©¦ç”¨çš„ä»¥å¤ªå¹£ã€‚

é‚£æ€éº¼å–å¾—é€™äº›æ¸¬è©¦ç”¨ä»¥å¤ªå¹£å‘¢ï¼Ÿç¶²è·¯ä¸Šæœƒæœ‰äººå»ºç«‹ä¸€äº› faucet service è®“ä½ å¯ä»¥è¼•æ˜“åœ°å–å¾—æ¸¬è©¦ç”¨çš„ä»¥å¤ªå¹£ï¼Œå¯ä»¥å¾é‚£é‚Šå–å¾—ï¼Œä½†é€™å°±å»¶ä¼¸å‡ºç¬¬äºŒçš„å•é¡Œã€‚

#### æ¸¬è©¦ç¶²è·¯ä¸åªä¸€å€‹

æƒ³è¦å–å¾—æ¸¬è©¦ç¶²è·¯çš„ä¹™å¤ªå¹£åœ¨ Taipei Ethereum Meetup çš„ slack ä¸Šé¢è©¢å•å¾Œæ‰çŸ¥é“ï¼ŒåŸä¾†æ¸¬è©¦ç¶²è·¯ä¸åªä¸€ç¨®ã€‚æˆ‘ç›®å‰ç”¨çš„æœ‰ Kovan è·Ÿ Ropstenï¼Œè€Œ Mist wallet é è¨­æ˜¯ Rpostenï¼Œè€Œä½¿ç”¨ Parity å¯ä»¥é¸æ“‡è¨±å¤šä¸åŒçš„æ¸¬è©¦ç¶²è·¯ã€‚

**2017/8/10 æ›´æ–°**ï¼šmist åœ¨ 0.9 ç‰ˆæœ¬ä»¥å¾Œæ”¯æ´åˆ‡æ›åˆ° rinkeby ç¶²è·¯ï¼Œæ’°å¯«æ–‡ç« æ™‚æˆ‘ç”¨çš„æ˜¯ 0.8.10ã€‚

ä¸åŒçš„æ¸¬è©¦ç¶²è·¯æœƒæœ‰ä¸åŒçš„ faucet service å¯ç”¨ã€‚ä¾‹å¦‚æˆ‘ç¾åœ¨ä½¿ç”¨çš„ Rposten ç¶²è·¯å¯ä»¥ç”¨ä»¥ä¸‹æŒ‡ä»¤å–å¾—æ¸¬è©¦ç”¨çš„ä»¥å¤ªå¹£å¦‚ä¸‹ï¼š
`curl -X POST  -H &#34;Content-Type: application/json&#34; -d &#39;{&#34;toWhom&#34;:&#34;**YOUR_ADDRESS**&#34;}&#39; [https://ropsten.faucet.b9lab.com/tap](https://ropsten.faucet.b9lab.com/tap)`

å¦‚æœåœ¨ä¸åŒçš„æ¸¬è©¦ç¶²è·¯ï¼Œå¯ä»¥åœ¨ç¶²è·¯ä¸Šæ‰¾é‚£å€‹æ¸¬è©¦ç¶²è·¯çš„åç¨±åŠ ä¸Š faucetï¼Œæ¯”å¦‚èªª `kovan faucet` ã€‚å–å¾—æ¸¬è©¦ç¶²è·¯çš„ä»¥å¤ªå¹£å¾Œï¼Œä½ å°±å¯ä»¥ç…§è‘—[å®˜æ–¹çš„æŒ‡å¼•](https://ethereum.org/token)é–‹å§‹å¯« Smart Contractã€‚

### é€£æ¥å…¬é–‹ç¶²è·¯

æˆ‘å€‘è¦å…ˆè¬›çš„æ˜¯å…¬é–‹çš„å€å¡Šéˆç¶²è·¯è¦å¦‚ä½•é€£æ¥ï¼Œé€™é‚Šæœƒè¬›ç”¨ Mist, geth ä»¥åŠ parity åˆ†åˆ¥è¦æ€éº¼åˆ‡æ›ç¶²è·¯ã€‚

#### Mist

åœ¨ Mist 0.8.10 çš„ä»‹é¢è£¡é¢ï¼Œä½ å¯ä»¥é¸æ“‡ mainnet æˆ– testnetï¼Œmainnet å°±æ˜¯ä¸»ç¶²è·¯ï¼Œæœƒä½¿ç”¨çœŸçš„ä»¥å¤ªå¹£çš„åœ°æ–¹ã€‚testnet åœ¨ Mist 0.8.10 å…§å‰‡æ˜¯æŒ‡ `Rposten` æ¸¬è©¦ç¶²è·¯ï¼Œåœ¨ 0.9 ç‰ˆé–‹å§‹æ–°å¢äº† Rinkeby æ¸¬è©¦ç¶²è·¯ï¼Œæ‰€ä»¥å°±æœ‰å…©å€‹æ¸¬è©¦ç¶²è·¯å¯ä»¥é¸ã€‚

æˆ‘åœ¨çœ‹ç¶²è·¯ä¸Šçš„æ–‡ç« æ™‚æœ‰æåˆ° Mist æœƒåµæ¸¬èƒŒæ™¯å¦‚æœæœ‰è·‘ geth çš„è©±ï¼Œå°±æœƒç›´æ¥é€£æ¥åˆ°é‚£å€‹å·²ç¶“é–‹è‘—çš„ gethï¼Œä¸éæˆ‘ç›®å‰è©¦éå¦‚æœåœ¨ geth åˆ‡æ›åˆ° rinkeby ç¶²è·¯æ˜¯æœƒå‡ºéŒ¯ï¼Œé‚„ä¸å¤ªç¢ºå®šæ˜¯ä»€éº¼åŸå› ï¼Œç›®å‰çŒœæ¸¬æœ‰å¯èƒ½æ˜¯å› ç‚ºæˆ‘æ˜¯ç”¨ 0.8.10 ç‰ˆæœ¬çš„ mistï¼Œå‡ç´šæœ‰å¯èƒ½å¯ä»¥è§£æ±ºé€™å€‹å•é¡Œã€‚

![image](/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/8.png#layoutTextWidth)

#### geth

ä¸‹é” `geth --help` å¾Œæœƒçœ‹åˆ°å¯ä»¥ç”¨ `--networkid`, `--testnet`æˆ– `â€”-rinkby`æŒ‡å®šä¸åŒç¶²è·¯ï¼š

![image](/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/9.png#layoutTextWidth)

é™¤äº† Frontier æ˜¯ä¸»ç¶²è·¯å¤–ï¼Œæ¸¬è©¦ç¶²è·¯å¯ä»¥é¸æ“‡ (3) Rposten æˆ– (4) Rinkebyï¼Œè‡³æ–¼æ¯å€‹ç¶²è·¯ä»£è™Ÿçš„æ„ç¾©å¯ä»¥åƒè€ƒ[é€™ç¯‡æ–‡ç« ](https://ethereum.stackexchange.com/a/10313)ï¼Œé€™é‚Šå°±ä¸ç´°è¬›äº†ã€‚

å¦å¤–æ ¹æ“š [StackOverFlow ä¸Šçš„é€™ç¯‡æ–‡ç« ](https://ethereum.stackexchange.com/a/10449)ï¼Œç”¨ `--testnet` æˆ– `--networkid` ä¸ä¸€æ¨£çš„åœ°æ–¹æ˜¯ç”¨ `--testnet` é‚„æœƒé¡å¤–çš„å¹«ä½ ç¢ºèªä½ çš„ genesis æª”æ¡ˆæ˜¯æ­£ç¢ºçš„ã€‚

#### Parity

parity åŒæ¨£çš„ç”¨ `--help` å°±å¯ä»¥çœ‹åˆ°ä½¿ç”¨ `--chain` å¯ä»¥æŒ‡å®šå„ç¨®æ¸¬è©¦ç¶²è·¯ï¼Œå®ƒå¯ä»¥æŒ‡å®šçš„æ¸¬è©¦ç¶²è·¯éå¸¸å¤šï¼Œä¹ŸåŒ…å« Kovan æ¸¬è©¦ç¶²è·¯ã€‚

![image](/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/10.png#layoutTextWidth)

### å»ºç«‹ç§æœ‰ç¶²è·¯

**å»ºç«‹ç§æœ‰ç¶²è·¯** è·Ÿä¸‹ä¸€ç¯€ **ä½¿ç”¨ testrpc** æ˜¯æˆ‘æ˜¨å¤© (2017/8/8) åœ¨ Taipei Ethereum Meetup è½åˆ°çš„ï¼Œé€™é‚Šæœ‰[ç•¶å¤©çš„éŒ„å½±](https://www.youtube.com/watch?v=-iXqJhSdVp0)ï¼Œæ„Ÿè¬è¬›è€… [æå©·å©· Lee Ting Ting](https://medium.com/u/f939717fd7fb) çš„åˆ†äº«ã€‚

é€™é‚Šç”¨ geth ä¾†å»ºç«‹ç§æœ‰ç¶²è·¯ï¼Œå»ºç«‹ç§æœ‰ç¶²è·¯æ™‚éœ€è¦ä¸€å€‹ genesis.json æª”æ¡ˆä¾†è¨˜éŒ„é€™å€‹ç§æœ‰å€å¡Šéˆç¶²è·¯çš„æ‰€æœ‰åˆå§‹æ¢ä»¶ã€‚åœ¨æ¼”è¬›ä¸­å¥¹æä¾›äº†ä¸€å€‹æœ€å°åŒ–çš„ genesis.jsonï¼š
` {
  &#34;config&#34;: {},``  // æ¯å€‹ block æ“ä½œçš„ gas ä¸Šé™ï¼Œç”¨åœ¨æ¸¬è©¦æ™‚èª¿å¾—æ„ˆé«˜æ„ˆå¥½ï¼Œ
  // é¿å…æ¸¬è©¦æ™‚æ“ä½œæ™‚èŠ±è²»çš„ gas è§¸åŠä¸Šé™ï¼Œè«‹åƒè€ƒ[æ­¤æ–‡](https://github.com/ethereum/homestead-guide/blob/master/source/ether.rst#gas-and-ether)ã€‚
  &#34;gasLimit&#34;: &#34;2000000000000&#34;,``  // æŒ–ç¤¦çš„å›°é›£åº¦ï¼Œèª¿ä½ä¸€é»æœƒè®“æŒ–ç¤¦é€Ÿåº¦è®Šå¿«
  &#34;difficulty&#34;: &#34;1&#34;,``  // é å…ˆæœ‰ä»¥å¤ªå¹£çš„å¸³è™Ÿï¼Œå¯ä»¥åœ¨é€™é‚Šé å…ˆè¨­å®šå¥½æŸäº›å¸³è™Ÿè£¡é¢çš„ä»¥å¤ªå¹£æ•¸é‡
  &#34;alloc&#34;: {}
} `

æœ‰äº† genesis.json å¾Œå°±å¯ä»¥ç”¨ `geth init` åˆå§‹åŒ–å€å¡Šéˆï¼š
`$ geth init genesis.json --datadir privatechain`

`privatechain` æ˜¯ä¸€å€‹ä¸å­˜åœ¨çš„ç›®éŒ„ï¼ŒåŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤å¾Œæœƒè¢«å»ºç«‹ã€‚å»ºç«‹å¾Œå°±å¯ä»¥é€²å…¥ `geth console` ï¼Œå…ˆç”¨ `personal.createAccount(&#39;&#39;)` å»ºç«‹å¸³è™Ÿä¸¦ä¸”ç”¨ `miner.start()` é–‹å§‹æŒ–ç¤¦ä»¥åŠ `miner.stop()` åœæ­¢æŒ–ç¤¦ã€‚
` // networkid æ˜¯ç”¨ä¾†ä»£è¡¨é€™å€‹ network çš„ä»£ç¢¼ï¼Œmainnet æ˜¯ 1
// é‚„æœ‰ä¸€äº›æ¸¬è©¦ç¶²è·¯åœ¨ 2~4 ä¹‹é–“
// æ¸¬è©¦æ™‚å°±ä½¿ç”¨ä¸€å€‹å¤§ä¸€é»çš„æ•¸å­—å¦‚ 123 æˆ– 10000 å°±è¡Œäº†
$ **geth --networkid 10000 --datadir privatechain console**``// æ–°å¢ä¸€å€‹éŒ¢åŒ…åœ°å€
&gt; **personal.newAccount(&#39;&#39;)**``// é–‹å§‹æŒ–ç¤¦
&gt; **miner.start()**``// ç¬¬ä¸€æ¬¡æŒ–ç¤¦æœƒæœ‰é€™å€‹è¨Šæ¯ï¼Œè·‘å€‹å¹¾åˆ†é˜å¾Œå°±æœƒé–‹å§‹æŒ–ç¤¦äº†ã€‚
INFO [08-09|19:00:53] Generating DAG in progress               epoch=1 percentage=0 elapsed=2.953s``// é€™é‚Šçš„è¨Šæ¯ä»£è¡¨é–‹å§‹æŒ–åˆ°ç¤¦äº†
INFO [08-09|19:01:02] ğŸ”¨ mined potential block                  number=9 hash=476c02â€¦e3084e
INFO [08-09|19:01:02] Commit new mining work                   number=10 txs=0 uncles=0 elapsed=275.342Âµs
INFO [08-09|19:01:03] Successfully sealed new block            number=10 hash=3788e4â€¦eda782``// åœæ­¢æŒ–ç¤¦
**miner.stop()** `

é€™æ™‚ç”¨ä¸‹é¢çš„æŒ‡ä»¤å°±å¯ä»¥çœ‹åˆ°ç›®å‰çš„ä»¥å¤ªå¹£æœ‰å¤šå°‘ï¼Œä¹Ÿå¯ä»¥ç”¨å…¶ä»–å„å¼å„æ¨£çš„æŒ‡ä»¤ã€‚
`&gt; **eth.getBalance(eth.accounts[0])**
285000000000000000000`

### ä½¿ç”¨ testrpc

[testrpc](https://github.com/ethereumjs/testrpc) æ˜¯ä¸€å€‹ node.js æ¨¡çµ„ï¼Œæ¨¡æ“¬äº†ä¸€å€‹ ethereum client çš„è¡Œç‚ºè®“åœ¨é–‹ç™¼æ™‚å¯ä»¥ä¸ç”¨åœ¨çœŸçš„å€å¡Šéˆä¸Šè·‘ã€‚ç”¨ä»¥ä¸‹æŒ‡ä»¤å®‰è£ï¼š
`$ npm install -g ethereumjs-testrpc`

å®‰è£å®Œä»¥å¾Œå°±å¯ä»¥ç”¨ä»¥ä¸‹æŒ‡ä»¤å•Ÿå‹•ï¼š
`$ testrpc`

é€™æ™‚ testrpc æœƒå»ºç«‹ä¸€äº›å¸³è™Ÿï¼Œä¸¦ä¸”æ–°å¢ä¸€äº›æ¸¬è©¦ç”¨çš„ä»¥å¤ªå¹£ï¼Œæœ€å¾Œé¢æœ‰å€‹ç¶²å€å¯ä»¥ä½¿ç”¨ geth console é€£å…¥ï¼Œé€™æ•´å€‹ç¶²è·¯éƒ½æ˜¯æ¨¡æ“¬çš„ï¼Œä¸¦ä¸æ˜¯ private chainï¼Œåªæ˜¯ä¸€å€‹æ¨¡æ“¬ç¶²è·¯æä¾›é–‹ç™¼è€…æ¸¬è©¦çš„æ¨¡çµ„ã€‚

![image](/posts/2017-08-10_ethereum-smart-contract-å…¥é–€é›œè«‡/images/11.png#layoutTextWidth)

é–‹å•Ÿå¦å¤–ä¸€å€‹ terminalï¼Œè¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤å°±å¯ä»¥é€£é€²å» testrpc æ‰€å‰µå»ºçš„æ¨¡æ“¬ç’°å¢ƒäº†ã€‚
`$ geth attach [http://localhost:8545](http://localhost:8545)`

### çµèª

Ethereum ç›®å‰åœ¨ä¸€å€‹é€²å±•éå¸¸å¿«çš„éšæ®µï¼Œç¶²è·¯ä¸Šçš„æ–‡ä»¶ç”šè‡³å®˜æ–¹çš„æ•™å­¸éƒ½å¾ˆæœ‰å¯èƒ½éæ™‚ã€‚

åœ¨æˆ‘å˜—è©¦ Smart Contract çš„é€™æ®µæ™‚é–“ï¼Œé‡åˆ°äº† Faucet Service æ²’è¾¦æ³•ç™¼å‡ºéŒ¢ï¼Œåˆé‡åˆ°äº† Mist / geth èŠ±è²»å¤ªä¹…çš„æ™‚é–“åŒæ­¥å€å¡Šï¼Œæœ€å¾Œåˆé‡åˆ°æ­£å¥½ geth æŠŠ `web3.eth.compile.solidity()` deprecated æ‰ã€‚

èº«ç‚ºä¸€å€‹å‰›å…¥å€å¡Šéˆçš„äººï¼Œè¦ºå¾—å…¥é–€çš„é–€æª»åè€Œæ˜¯é€™äº›é«˜é€Ÿé€²å±•è€Œä¸çŸ¥é“å“ªä»½æ–‡ä»¶å¯ä»¥åƒè€ƒçš„æƒ…æ³ã€‚ä¸éé€™ç¨®ç‹€æ³å¤§æ¦‚æœƒéš¨è‘— Ethereum çš„ç©©å®šå°±æ¯”è¼ƒä¸æœƒæœ‰é€™æ¨£çš„ç‹€æ³äº†ã€‚

ä¸Šæ¬¡å»äº† Taipei Ethereum Meetup è¦ºå¾—çœŸçš„å¾ˆæœ‰å¹«åŠ©ï¼Œæœç„¶è·Ÿå·²ç¶“åœ¨ç©çš„äººèŠèŠå¯ä»¥ç²å¾—å¾ˆå¤šæ–°çŸ¥ã€‚æœ‰èˆˆè¶£çš„ä¹Ÿå¯ä»¥ç·šä¸Šæˆ–ä¾†å¯¦é«”èšæœƒåƒåŠ é€™å€‹ç¤¾ç¾¤ï¼

[Taipei Ethereum Meetup](https://www.meetup.com/Taipei-Ethereum-Meetup/)
