---
title: "選擇權簡介"
author: "Yuren Ju"
date: 2021-12-02T04:21:38.191Z
lastmod: 2023-06-06T13:44:41+08:00
categories: [tech]

description: ""

subtitle: "Bob 如果三個月後需要 100 KG 的咖啡豆，但是又擔心咖啡豆價格波動導致到時候買不起，該怎麼辦呢？"

images:
  - "/posts/2021-12-02_選擇權簡介/images/1.jpeg"
  - "/posts/2021-12-02_選擇權簡介/images/2.png"
  - "/posts/2021-12-02_選擇權簡介/images/3.png"
  - "/posts/2021-12-02_選擇權簡介/images/4.png"
  - "/posts/2021-12-02_選擇權簡介/images/5.png"
  - "/posts/2021-12-02_選擇權簡介/images/6.png"
  - "/posts/2021-12-02_選擇權簡介/images/7.png"
  - "/posts/2021-12-02_選擇權簡介/images/8.png"
  - "/posts/2021-12-02_選擇權簡介/images/9.png"
---

![image](/posts/2021-12-02_選擇權簡介/images/1.jpeg#layoutTextWidth)

Bob 如果三個月後需要 100 KG 的咖啡豆，但是又擔心咖啡豆價格波動導致到時候買不起，該怎麼辦呢？

他可以選擇透過期貨合約跟農會用一個約定的價格，在未來用該價格交換咖啡豆，比如說他可以用 500 元一公斤的價格約定以 50,000 元在三個月後依照這個合約買到 100 KG 的咖啡豆，無論到時候市場上的咖啡豆價格是多少。

而另外一個方式是如果農會願意的話，農會可以跟 Bob 簽訂一個合約，讓 Bob 先付每公斤 50 元簽約費用，等到約定的時間到了之後讓 Bob 「選擇」要不要用每公斤 500 元買 100 KG 的咖啡。

如果他決定不要買，簽約費用是不退的，農會就得到額外每公斤 50 元的利潤；但如果 Bob 決定要買，農會就一定要履行這個合約，用每公斤 500 元賣給 Bob 100 KG 的咖啡豆。

此時自然會發生一個現象：如果咖啡豆漲超過 50 元，Bob 肯定會履行合約，因為他可以把咖啡豆從農會拿到後馬上到市場上去賣掉，比如說市場上一公斤的咖啡豆已經 700 元了，Bob 把咖啡豆拿去市場上賣，就可以賺 `(700 — 500 — 50) * 100 = 15,000`。

反之如果價格沒漲過 50 元，Bob 肯定會選擇不履行這筆合約，到市場上買咖啡豆。

這個就是選擇權 (Option)。

### Bob 與農會的獲利分析

從上面的例子我們可以分析一下 Bob 跟農會分別在什麼狀況會獲利，首先看一下 Bob：

![image](/posts/2021-12-02_選擇權簡介/images/2.png#layoutTextWidth)

橫軸是咖啡豆的價格，縱軸是 Bob 的獲利。每公斤咖啡豆 Bob 的費用是 50 元，所以當價格低於每公斤 550 元前，Bob 的虧損都是固定每公斤 50 元，但超過 500 的時候虧損就會開始縮小，直到超過 550 元之後就開始獲利了。而且如果每公斤到 1000 元時 Bob 就賺翻了。那農會呢？

![image](/posts/2021-12-02_選擇權簡介/images/3.png#layoutTextWidth)

農會在價格到 500 元前，獲利都一直保持 50 元，價格超過 500 元之後獲利就開始減少，超過 550 元後就開始虧損，如果每公斤 1000 元，他就虧爆了。顯然這不是個賺錢的好方法，後面會講要怎麼解決這個問題。

另外約定到時候要履行的價格稱為履約價 (Strike Pirce)，這個買選擇權要用的費用，稱為權利金 (Premium)。

### 選擇權的種類

選擇權有很多種類，而且你可以決定當買方還是賣方，所以你的角色可以是 Bob 也可以是農會。上面說的這種選擇權，叫做看漲選擇權 (Call Option)，除此之外有另外一種叫做看空選擇權 (Put Option)。

概念就跟看漲選擇權相反，舉例來說 Chris 是小農，他希望在三個月後可以賣掉 100 KG 的咖啡豆，但是又擔心到時候市場價格太低，而農會因為有足夠的資金與賺取權利金的誘因，所以就跟 Chris 簽下了這樣的契約：三個月後農會用每公斤 500 元的價格跟 Chris 買下咖啡豆，而 Chris 付出每公斤 50 元就可以跟農會買下這個選擇權。

在這個情況下，如果價格下跌超過 50 元，Chris 履行合約就會賺錢。比如說三個月後價格變成 400 元，此時農會還是要用 500 元跟 Chris 購買咖啡豆，此時 Chris 就可以賺得 `(500 — 400 — 50) * 100 = 5,000`，如果咖啡豆價格上漲時，Chris 就會選擇不履行合約，因為他就可以把他的咖啡豆拿到市面上賣獲得更好的利潤，如果扣除掉權利金可以獲利，Chris 就會選擇這麼做。

### 看空選擇權的獲利分析

一樣我們來看一下 Chris 的獲利分析：

![image](/posts/2021-12-02_選擇權簡介/images/4.png#layoutTextWidth)

Chris 在價格 500 元以上的時候都會固定虧損 50 元，因為如果價格太高，他就會選不履行選擇權合約，直接到市場賣咖啡豆，但會虧掉固定金額的權利金。當價格低於 500 元時會開始減少虧損，低於 450 時就會開始獲利，價格越低就賺愈多。

![image](/posts/2021-12-02_選擇權簡介/images/5.png#layoutTextWidth)

農會則是價格低於 450 元就會開始賠錢。這邊一樣農會看起來有可能虧損的風險很高，隨著價格的下跌他的虧損可能會很大，之後會提到其他方法來避免這樣的風險。

### 交割形式

以上講的都是現貨交割 (physical settlement)，意思就是結算合約的時候會真的拿貨品來交易，比如說咖啡豆來一手交錢一手交貨。但其實因為咖啡豆也在市場上流通，只要多一個步驟到市場上去買賣咖啡豆，就可以獲得現金的利潤。

所以如果我們不拿貨物來結算，而是直接把價差付給對方就稱為現金交割 (cash-settled)。

比如說 Bob 的例子，當市場價格 700 元時，但是交割約定的金額是 500，這個時候 Bob 先跟農會用每公斤 500 元買了 100 KG 的咖啡豆再拿到市場上賣出獲得 `(700 — 500 — 50) * 100 = 15,000`，這個就是現貨交割。

如果農會跟 Bob 協議直接用現金結算，此時農會就會直接給 Bob `(700-500)*100 = 20,000`，這個就是現金交割（Bob 最剛開始就付了 5,000 的權利金了，所以實際獲利還是 15,000），跟現貨交割一樣。

現金交割的好處是可以不涉入貨品的交易，所以交易時不需要有咖啡、原油等等標的資產，這樣可以提升交易的效率，但又可以達到一樣的效果。

### 賣方的風險

![image](/posts/2021-12-02_選擇權簡介/images/6.png#layoutTextWidth)

我們把四種不一樣型態的獲利分析放在一起看，這時候會發現擔任買方的 Bob 與 Chris 頂多就承擔權利金的損失，但是獲利隨著價格往自己有利的方向前進時獲利會愈來愈多；相反來說擔任賣方的農會雖然有機會賺取權利金，但承受的風險很高。

賣方如果想要避開這些風險，此時就會透過避險 (Hedge) 策略來減低風險。

以下用咖啡豆舉例，不過我們就不討論時間怎麼影響咖啡豆的品質，或是這批咖啡豆跟下批咖啡豆的差異了，這邊先假設每批品質都一樣，而且不會被時間影響品質。

#### 看漲選擇權避險

首先我們看一下賣看漲選擇權要怎麼避險，其實最簡單的方法就是現在就到市場上也買 100 KG 的咖啡豆就可以了。這樣三個月後價格真的上漲時，農會只要到市場上賣出咖啡豆，就可以清償給 Bob 的利潤。

#### 看空選擇權避險

但如果要作看空選擇權的避險就稍微複雜些，這個時候就需要作空咖啡豆。具體的操作是這樣，農會先付押金比如說每公斤 500 元的押金從另外一個農業合作社借出 100KG 咖啡豆，並且到市場上賣掉，獲得五萬元。

如果三個月後咖啡豆真的跌到懷疑人生變成每公斤 100 元的時候，就可以用三個月前賣掉咖啡豆的錢，把 100 KG 的咖啡豆從市場上買回來，並且還給農業合作社咖啡豆並支付利息，取回原本的押金。

因為三個月前抵押時的押金是 500 元（總價是五萬），但是現在買咖啡豆只要 100 元（總價是一萬），但是一樣只要償還 100 KG 的咖啡豆給合作社。這樣就可以用一萬買到 100 KG 的咖啡豆還給合作社，然後可以拿回五萬，農會就有錢可以清償給 Chris 的利潤了。

這樣的避險策略就可以讓農會在降低風險的狀況下，同時又可以賺取權利金，但其實市場上還有其他風險，不過我們就簡介到這邊。

另外因為不管是買資產或是作空資產都需要額外成本，如何算出權利金就是很重要的課題了。

### 權利金的計算

在選擇權的權利金 (Premium) 的計算，最常使用的就是 [Black-Scholes Model](https://zh.wikipedia.org/wiki/%E5%B8%83%E8%8E%B1%E5%85%8B-%E8%88%92%E5%B0%94%E6%96%AF%E6%A8%A1%E5%9E%8B)，這是個用來為選擇權定價的數學模型，系統裡面有很多屬性會以希臘字母 (Greeks) 表示。

![image](/posts/2021-12-02_選擇權簡介/images/7.png#layoutTextWidth)

透過 BS Model 為選擇權定價需要五樣參數來決定選擇權的價格：

- Underlying Price: 標的資產的價格，比如說咖啡豆
- Strike Price: 履約價，比如說三個月後約定要結算的價格
- Expiry: 到期日，比如說三個月後
- Volatility: 波動率，價格波動的可能性，後面詳述
- Risk-free interest rate: 無風險利率，在沒有任何風險的狀況下可以獲得的利潤

以上這些條件除了 Volatility 以外其他都是可以觀測到的參數，而 Volatility 就比較複雜一些。

#### 波動率 (Volatility)

![image](/posts/2021-12-02_選擇權簡介/images/8.png#layoutTextWidth)

在這邊我們討論兩種波動率：歷史波動率 (Historical Volatility) 與隱含波動率 (Implied Volatility)。

歷史波動率是指觀察歷史價格計算出的波動率，比如說咖啡豆過去一年的歷史波動率為 50%，代表從現在價格 500 元來看，最高/最低可以到 50% 如 750 元或 250 元。

隱含波動率 (Implied Volatility, IV) 在 BS Model 下則是用其他四個參數再加上已知的選擇權價格推估的波動率，這個波動率將會推估未來一年資產的價格波動。比如說現在價格是 500 元的咖啡豆，如果 IV 是 30% 就代表未來一年推估有可能到 650 元或是跌到 350 元。當然這都是套用模型的推估，不代表波動率一定不會超過這個數據。

在 BS Model 的定價模型中 Volatility 是一個常數，但是如果觀察市場上選擇權的價格並反推 IV 時則會發現真實在市場上的 IV 並不是常數，而是一個跟履約價 (Strike Price) 與當下標的資產價格 (Underlying Price) 有一個相對關係。

在觀察選擇權市場會發現反推出的 IV 在履約價最接近現價的 IV 會最低，而履約價距離現價越遠的選擇權反推出的 IV 越高。這樣觀察出來的現象稱為 Volatility Smile。

![image](/posts/2021-12-02_選擇權簡介/images/9.png#layoutTextWidth)

這樣的觀測現象通常會在選擇權市場開設時，會拿來針對不同履約價的選擇權微調價格，履約價愈靠近現價的選擇權的價格會愈便宜。

### 總結

以上就是選擇權的簡介了，這是接下來一篇介紹 Lyra Protocol 的前導文，同時也是重新檢視我自己對選擇權的理解程度。

本篇文章並沒有介紹各種希臘字母的指標是代表何種意義，如 Delta, Gamma 或 Vega 等，如果有興趣的讀者建議閱讀 [Anton](https://antonassocareer.medium.com/) 撰寫的文章《選擇權的定價與避險參數》：

[選擇權的定價與避險參數](https://antonassocareer.medium.com/%E9%82%A3%E4%BA%9B%E5%B9%B4-%E6%B2%92%E5%AD%B8%E5%A5%BD%E7%9A%84%E9%81%B8%E6%93%87%E6%AC%8A-2-6934483b2f78)

同時他也有寫另外一篇《[DeFi 選擇權入門](https://antonassocareer.medium.com/%E9%82%A3%E4%BA%9B%E5%B9%B4-%E6%B2%92%E5%AD%B8%E5%A5%BD%E7%9A%84%E9%81%B8%E6%93%87%E6%AC%8A-1-ae648eab2215)》也值得一讀。
